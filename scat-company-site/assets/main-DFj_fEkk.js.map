{"version":3,"file":"main-DFj_fEkk.js","sources":["../../src/assets/ts/main.ts"],"sourcesContent":["(function () {\r\n  function toggleModalWindow() {\r\n    const html = document.querySelector('html')!;\r\n    const modals = document.querySelectorAll<HTMLElement>('.modal_window[data-modal]');\r\n    const buttons = document.querySelectorAll<HTMLButtonElement>('[data-open-modal]:where(button, input)');\r\n\r\n    for (const button of buttons) {\r\n      button.addEventListener('click', function () {\r\n        const name = this.dataset.openModal;\r\n        const modal = document.querySelector(`.modal_window[data-modal=\"${name}\"]`);\r\n\r\n        if (!modal) {\r\n          return;\r\n        }\r\n\r\n        html.setAttribute('data-modal-visible', 'true');\r\n        modal.setAttribute('data-visible', 'true');\r\n      });\r\n    }\r\n\r\n    for (const modal of modals) {\r\n      const close = modal.querySelector('.modal_window__close');\r\n      const backdrop = modal.querySelector('.modal_window__back');\r\n\r\n      close?.addEventListener('click', function () {\r\n        modal.setAttribute('data-visible', 'false');\r\n        html.removeAttribute('data-modal-visible');\r\n      });\r\n\r\n      backdrop?.addEventListener('click', function () {\r\n        modal.setAttribute('data-visible', 'false');\r\n        html.removeAttribute('data-modal-visible');\r\n      });\r\n    }\r\n  }\r\n\r\n  function initInputPhoneMask() {\r\n    [].forEach.call(document.querySelectorAll('input[type=\"tel\"]'), function (input: any) {\r\n      var keyCode: number;\r\n\r\n      function mask(this: HTMLInputElement, event: any) {\r\n        event.keyCode && (keyCode = event.keyCode);\r\n        var pos = Number(this.selectionStart);\r\n        if (pos < 3) event.preventDefault();\r\n        // +7 (___)-___-__-__\r\n        let matrix = '+7 (___)-___-__-__',\r\n          i = 0,\r\n          def = matrix.replace(/\\D/g, ''),\r\n          val = this.value.replace(/\\D/g, ''),\r\n          new_value = matrix.replace(/[_\\d]/g, function (a) {\r\n            return i < val.length ? val.charAt(i++) || def.charAt(i) : a;\r\n          });\r\n        i = new_value.indexOf('_');\r\n        if (i != -1) {\r\n          i < 5 && (i = 3);\r\n          new_value = new_value.slice(0, i);\r\n        }\r\n        var reg: string | RegExp = matrix\r\n          .substr(0, this.value.length)\r\n          .replace(/_+/g, function (a) {\r\n            return '\\\\d{1,' + a.length + '}';\r\n          })\r\n          .replace(/[+()]/g, '\\\\$&');\r\n        reg = new RegExp('^' + reg + '$');\r\n        if (!reg.test(this.value) || this.value.length < 5 || (keyCode > 47 && keyCode < 58)) this.value = new_value;\r\n        if (event.type == 'blur' && this.value.length < 5) this.value = '';\r\n      }\r\n\r\n      input.addEventListener('input', mask, false);\r\n      input.addEventListener('focus', mask, false);\r\n      input.addEventListener('blur', mask, false);\r\n      input.addEventListener('keydown', mask, false);\r\n    });\r\n  }\r\n\r\n  document.addEventListener('DOMContentLoaded', () => {\r\n    toggleModalWindow();\r\n    initInputPhoneMask();\r\n  });\r\n})();\r\n"],"names":["toggleModalWindow","html","modals","buttons","button","name","modal","close","backdrop","initInputPhoneMask","input","keyCode","mask","event","pos","matrix","i","def","val","new_value","a","reg"],"mappings":"usBAAC,UAAY,CACX,SAASA,GAAoB,CAC3B,MAAMC,EAAO,SAAS,cAAc,MAAM,EACpCC,EAAS,SAAS,iBAA8B,2BAA2B,EAC3EC,EAAU,SAAS,iBAAoC,wCAAwC,EAErG,UAAWC,KAAUD,EACnBC,EAAO,iBAAiB,QAAS,UAAY,CAC3C,MAAMC,EAAO,KAAK,QAAQ,UACpBC,EAAQ,SAAS,cAAc,6BAA6BD,CAAI,IAAI,EAErEC,IAILL,EAAK,aAAa,qBAAsB,MAAM,EAC9CK,EAAM,aAAa,eAAgB,MAAM,EAC3C,CAAC,EAGH,UAAWA,KAASJ,EAAQ,CAC1B,MAAMK,EAAQD,EAAM,cAAc,sBAAsB,EAClDE,EAAWF,EAAM,cAAc,qBAAqB,EAE1DC,GAAO,iBAAiB,QAAS,UAAY,CAC3CD,EAAM,aAAa,eAAgB,OAAO,EAC1CL,EAAK,gBAAgB,oBAAoB,CAC3C,CAAC,EAEDO,GAAU,iBAAiB,QAAS,UAAY,CAC9CF,EAAM,aAAa,eAAgB,OAAO,EAC1CL,EAAK,gBAAgB,oBAAoB,CAC3C,CAAC,CACH,CACF,CAEA,SAASQ,GAAqB,CAC5B,CAAA,EAAG,QAAQ,KAAK,SAAS,iBAAiB,mBAAmB,EAAG,SAAUC,EAAY,CACpF,IAAIC,EAEJ,SAASC,EAA6BC,EAAY,CAChDA,EAAM,UAAYF,EAAUE,EAAM,SAClC,IAAIC,EAAM,OAAO,KAAK,cAAc,EAChCA,EAAM,GAAGD,EAAM,eAAA,EAEnB,IAAIE,EAAS,qBACXC,EAAI,EACJC,EAAMF,EAAO,QAAQ,MAAO,EAAE,EAC9BG,EAAM,KAAK,MAAM,QAAQ,MAAO,EAAE,EAClCC,EAAYJ,EAAO,QAAQ,SAAU,SAAUK,EAAG,CAChD,OAAOJ,EAAIE,EAAI,OAASA,EAAI,OAAOF,GAAG,GAAKC,EAAI,OAAOD,CAAC,EAAII,CAC7D,CAAC,EACHJ,EAAIG,EAAU,QAAQ,GAAG,EACrBH,GAAK,KACPA,EAAI,IAAMA,EAAI,GACdG,EAAYA,EAAU,MAAM,EAAGH,CAAC,GAElC,IAAIK,EAAuBN,EACxB,OAAO,EAAG,KAAK,MAAM,MAAM,EAC3B,QAAQ,MAAO,SAAUK,EAAG,CAC3B,MAAO,SAAWA,EAAE,OAAS,GAC/B,CAAC,EACA,QAAQ,SAAU,MAAM,EAC3BC,EAAM,IAAI,OAAO,IAAMA,EAAM,GAAG,GAC5B,CAACA,EAAI,KAAK,KAAK,KAAK,GAAK,KAAK,MAAM,OAAS,GAAMV,EAAU,IAAMA,EAAU,WAAU,MAAQQ,GAC/FN,EAAM,MAAQ,QAAU,KAAK,MAAM,OAAS,SAAQ,MAAQ,GAClE,CAEAH,EAAM,iBAAiB,QAASE,EAAM,EAAK,EAC3CF,EAAM,iBAAiB,QAASE,EAAM,EAAK,EAC3CF,EAAM,iBAAiB,OAAQE,EAAM,EAAK,EAC1CF,EAAM,iBAAiB,UAAWE,EAAM,EAAK,CAC/C,CAAC,CACH,CAEA,SAAS,iBAAiB,mBAAoB,IAAM,CAClDZ,EAAA,EACAS,EAAA,CACF,CAAC,CACH,GAAA"}